define("sui/async/pqueue",function(a,b,c){!function(a,d,e){function f(a){var b=(new Date).getTime()/1e3,c=parseInt(b,10);return a?b:Math.round(1e3*(b-c))/1e3+" "+c}function g(){return f(!0)-k}function h(a){d.log("@"+(g().toString(10)+"        ").substr(0,8)+", PQUEUE: "+a)}function i(a){d.warn("@"+(g().toString(10)+"        ").substr(0,8)+", PQUEUE: "+a)}function j(a){return"object"!=typeof a?!1:"function"!=typeof a.constructor?!1:"string"!=typeof a.constructor.name?!1:"Array"===a.constructor.name}(d===e||a.PQUEUE_NOLOG===!0)&&(d={log:function(){},warn:function(){}});{var k=f(!0),l=[],m=function(){"use strict";function b(){X.clock===!1&&(X.clock=a.setInterval(K,0))}function c(){X.clock!==!1&&(a.clearInterval(X.clock),X.clock=!1)}function d(){var a="";for(var b in X.sharedHeap)""!==a&&(a+=", \n"),a+=b+":"+X.sharedHeap[b];return"{\n"+a+"\n}"}function f(){X.sharedHeap.length=0}function g(a,b){var c=Boolean(X.status&b);return a!==e&&(a?X.status|=b:X.status&=~b),c}function k(a){return g(a,Y)}function m(a){return g(a,Z)}function n(a){return g(a,$)}function q(a){return g(a,_)}function r(a){return g(a,ab)}function s(a){return g(a,bb)}function t(a){return g(a,cb)}function u(a){return g(a,db)}function v(a){return g(a,eb)}function w(a){return g(a,fb)}function x(){s(X.processCounter<0),t(X.processCounter>=X.processStack.length),u(X.nextProcess===o),v(X.nextProcess===p),w("function"!=typeof X.nextProcess),r(s()||t()||w())}function y(a){"number"==typeof a&&(X.processCounter=a,X.nextProcess=X.processStack[X.processCounter],x())}function z(){r()||y(X.processCounter+1)}function A(){r()||y(X.processCounter-1)}function B(a){"number"==typeof a&&(X.processCounter+=a,X.nextProcess=X.processStack[X.processCounter],x())}function C(a){var b=X.processIndexs[String(a)];return"number"==typeof b?b:-1}function D(){return X.processCounter}function E(){return"function"==typeof X.nextProcess?X.nextProcess.name:String(X.processCounter)}function F(a){r(!0),X.errorMessages.push("string"==typeof a?a:"")}function G(){for(i("pcUnderflow: "+Boolean(s())),i("pcOverflow: "+Boolean(t())),i("pcAtNoOp: "+Boolean(w())),i("pcAtHalt: "+Boolean(u())),i("pcAtBarrier: "+Boolean(v()));X.errorMessages.length>0;)i(X.errorMessages.shift())}function H(){n()||(n(!0),h("["+X.name+"].boot"),b())}function I(){n()&&(n(!1),h("["+X.name+"].halt"),c())}function J(a){n()||(h("["+X.name+"].reset"),y(R),a&&f())}function K(){if(n()&&!q()&&!m()){if(m(!0),h("["+X.name+"].tick"),r())return i("Has error(s)"),m(!1),G(),void I();if(u())return m(!1),void I();var a=X.processCounter,b=X.nextProcess;z(),h("PC:"+a+">>"+b.name),k(!0);try{b.call(gb,gb,gb.heap)}catch(c){F(c.message)}k(!1),m(!1)}}function L(b){X.wakerStack.push(a.setTimeout(gb.resume,b))}function M(){for(;X.wakerStack.length>0;)a.clearTimeout(X.wakerStack.shift())}function N(a){n()&&(q()||(q(!0),c(),"number"==typeof a&&L(a)))}function O(){n()&&q()&&(q(!1),M(),b())}var P=null,Q=[],R=0,S="",T=typeof arguments[0],U=typeof arguments[1],V=typeof arguments[2],W=typeof arguments[3];switch(arguments.length){case 1:if("string"===T)return l[arguments[0]];if("object"!==T)return null;if(j(arguments[0]))Q=arguments[0];else{if(!j(arguments[0].processArray))return null;P="object"==typeof arguments[0].parent?arguments[0].parent:null,Q=arguments[0].processArray,R="number"==typeof arguments[0].initialProcessID?arguments[0].initialProcessID:0,S="string"==typeof arguments[0].queueName?arguments[0].queueName:""}break;case 2:if("object"===T&&"object"===U)P=arguments[0],Q=arguments[1],R=0,S="";else if("object"===T&&"number"===U)P=null,Q=arguments[0],R=arguments[1],S="";else{if("object"!==T||"string"!==U)return null;P=null,Q=arguments[0],R=0,S=arguments[1]}break;case 3:if("object"===T&&"object"===U&&"number"===V)P=arguments[0],Q=arguments[1],R=arguments[2],S="";else if("object"===T&&"object"===U&&"string"===V)P=arguments[0],Q=arguments[1],R=0,S=arguments[2];else{if("object"!==T||"number"!==U||"string"!==V)return null;P=null,Q=arguments[0],R=arguments[1],S=arguments[2]}break;case 4:if("object"!==T||"object"!==U||"number"!==V||"string"!==W)return null;P=arguments[0],Q=arguments[1],R=arguments[2],S=arguments[3];break;default:return null}if("number"!=typeof R&&(R=0),h("Instantiating new process queue."),"object"!=typeof Q)return i("Invalid argument[1]. Expecting an Object."),i("Returning NULL."),null;h("Generating new process queue object.");for(var X={clock:!1,parent:P&&"object"==typeof P&&P.PQUEUE?P:null,name:"",status:0,errorMessages:[],processStack:[],processIndexs:[],processCounter:0,nextProcess:null,sharedHeap:{},wakerStack:[]},Y=1,Z=2,$=4,_=8,ab=16,bb=32,cb=64,db=128,eb=256,fb=512,gb={heap:X.sharedHeap,heap_dump:d,pause:function(a){k()&&!q()&&N(a)},resume:function(){q()&&O()},pc:{increment:z,decrement:A,offset:B,"goto":y,locate:C,valueOf:D,toString:E},isPaused:function(){return q()},parent:X.parent,PQUEUE:!0},hb={boot:function(){return H(),hb},halt:function(){return I(),hb},reset:function(){return J(),hb}},ib=0,jb=Q.length;jb>ib;++ib){var kb=Q[ib],lb=kb.name,mb=X.processStack.length;X.processStack.push(kb),""!==lb&&(X.processIndexs[lb]=mb)}return y(R),"string"==typeof S&&""!==S?(X.name=S,l[S]=gb):X.name=String((new Date).getTime()),hb},n="2.4.3",o=function(){},p=function(a){a.pause()},q=function(a){a.pause(),a.pc.offset(-1)};a.PQUEUE,a.PQUEUE_HALT,a.PQUEUE_BARRIER,a.PQUEUE_IDLE}m.PQUEUE=n,"object"==typeof a&&"object"==typeof a.document&&(a.PQUEUE=m,a.PQUEUE_HALT=o,a.PQUEUE_BARRIER=p,a.PQUEUE_IDLE=q),"object"==typeof b&&(c.exports=m)}(window,console)});